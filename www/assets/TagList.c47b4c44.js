import{p as B,X as C,Z as A,m as g,v as h,x as v,B as L,z as P,aw as d,ar as S,aq as $,ax as D,ay as p,az as F,aa as c,c as n,ac as i,f as Q,d as k,h as u,e as f,ah as w,j as b,ad as y,ae as T,af as z,w as x}from"./index.7d370b68.js";import{Q as _}from"./QChip.73d90e1c.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as N}from"./QTooltip.bb072c3f.js";var W=B({name:"QBanner",props:{...C,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:a}){const{proxy:{$q:s}}=L(),e=A(t,s),r=g(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(e.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),o=g(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const l=[h("div",{class:"q-banner__avatar col-auto row items-center self-start"},v(a.avatar)),h("div",{class:"q-banner__content col text-body2"},v(a.default))],m=v(a.action);return m!==void 0&&l.push(h("div",{class:o.value},m)),h("div",{class:r.value+(t.inlineActions===!1&&m!==void 0?" q-banner--top-padding":""),role:"alert"},l)}}});function Y(t){{const a={active:!0};if(typeof t=="function"){const s=g(t);a.val=s.value,P(s,e=>{a.val=e,a.active===!0&&d()})}else a.val=t;p.push(a),d(),S(()=>{a.active=!0,d()}),$(()=>{a.active=!1,d()}),D(()=>{p.splice(p.indexOf(a),1),d()})}}const ee=F("blog",{state:()=>({posts:[],post:null,categories:[],tags:[],loading:!1,error:null,filters:{category:null,tag:null,search:null}}),getters:{filteredPosts:t=>{let a=[...t.posts];if(t.filters.category&&(a=a.filter(s=>{var e;return((e=s.category)==null?void 0:e.slug)===t.filters.category})),t.filters.tag&&(a=a.filter(s=>{var e;return(e=s.tags)==null?void 0:e.some(r=>r.slug===t.filters.tag)})),t.filters.search){const s=t.filters.search.toLowerCase();a=a.filter(e=>{var r,o,l;return((r=e.title)==null?void 0:r.toLowerCase().includes(s))||((o=e.excerpt)==null?void 0:o.toLowerCase().includes(s))||((l=e.content)==null?void 0:l.toLowerCase().includes(s))})}return a}},actions:{async fetchPosts(t={}){var a,s;this.loading=!0,this.error=null;try{const e=await c.get("blog/posts/",{params:t});return this.posts=e.data.results||e.data,e.data}catch(e){throw this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message||"Failed to fetch posts",e}finally{this.loading=!1}},async fetchPostBySlug(t){var a,s;this.loading=!0,this.error=null;try{const e=await c.get(`blog/posts/${t}/`);return this.post=e.data,e.data}catch(e){throw this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message||"Failed to fetch post",e}finally{this.loading=!1}},async fetchCategories(){const t=await c.get("blog/categories/");return this.categories=t.data.results||t.data,t.data},async fetchTags(){const t=await c.get("blog/tags/");return this.tags=t.data.results||t.data,t.data},async fetchPostsByCategory(t){var a,s;this.loading=!0,this.error=null;try{const e=await c.get(`blog/posts/category/${t}/`);return this.posts=e.data.results||e.data,e.data}catch(e){throw this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message||"Failed to fetch posts by category",e}finally{this.loading=!1}},async fetchPostsByTag(t){var a,s;this.loading=!0,this.error=null;try{const e=await c.get(`blog/posts/tag/${t}/`);return this.posts=e.data.results||e.data,e.data}catch(e){throw this.error=((s=(a=e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message||"Failed to fetch posts by tag",e}finally{this.loading=!1}},setFilter(t,a){this.filters[t]=a},clearFilters(){this.filters={category:null,tag:null,search:null}},clearPost(){this.post=null}}});const I={class:"post-meta"},j={class:"row items-center q-gutter-md"},M={key:0,class:"col-auto"},V={key:1,class:"col-auto"},U={key:2,class:"col-auto text-caption text-grey-7"},E={key:3,class:"col-auto text-caption text-grey-7"},O="category",X={__name:"PostMeta",props:{author:{type:Object,default:null},createdAt:{type:String,default:null},publishedAt:{type:String,default:null},category:{type:Object,default:null},views:{type:Number,default:null}},setup(t){const a=t,s=g(()=>{if(!a.author)return"";const{first_name:r,last_name:o,username:l}=a.author;return r&&o?`${r} ${o}`.trim():r||o||l||""}),e=g(()=>{const r=a.publishedAt||a.createdAt;if(!r)return"";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return r}});return(r,o)=>(n(),i("div",I,[Q("div",j,[t.author?(n(),i("div",M,[s.value?(n(),k(_,{key:0,icon:"person",label:s.value,size:"sm",color:"primary","text-color":"white"},null,8,["label"])):u("",!0)])):u("",!0),t.category?(n(),i("div",V,[f(_,{icon:O,label:t.category.name,size:"sm",color:"secondary","text-color":"white",clickable:"",to:{name:"blog-category",params:{slug:t.category.slug}}},null,8,["label","to"])])):u("",!0),t.publishedAt||t.createdAt?(n(),i("div",U,[f(w,{name:"schedule",size:"xs",class:"q-mr-xs"}),b(" "+y(e.value),1)])):u("",!0),t.views!==null&&t.views!==void 0?(n(),i("div",E,[f(w,{name:"visibility",size:"xs",class:"q-mr-xs"}),b(" "+y(t.views)+" "+y(t.views===1?"view":"views"),1)])):u("",!0)])]))}};var te=q(X,[["__scopeId","data-v-e0eb8ca0"]]);const Z={key:0,class:"tag-list"},G={__name:"TagList",props:{tags:{type:Array,default:()=>[]}},setup(t){return(a,s)=>t.tags&&t.tags.length>0?(n(),i("div",Z,[(n(!0),i(T,null,z(t.tags,e=>(n(),k(_,{key:e.id||e.slug,label:e.name,size:"sm",color:"grey-7","text-color":"white",clickable:"",to:{name:"blog-tag",params:{slug:e.slug}},class:"q-mr-xs q-mb-xs"},{default:x(()=>[f(N,null,{default:x(()=>[b(y(e.name),1)]),_:2},1024)]),_:2},1032,["label","to"]))),128))])):u("",!0)}};var ae=q(G,[["__scopeId","data-v-54a21308"]]);export{te as P,W as Q,ae as T,Y as a,ee as u};
